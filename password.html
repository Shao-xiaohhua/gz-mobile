<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta content="telephone=no" name="format-detection"/>
  <meta content="address=no" name="format-detection"/>
  <meta name="apple-mobile-web-app-capable" content="no" />

  <title>密码登录</title>
  <meta name="keywords" content="" />  
  <meta name="description" content="" /> 
  <meta name="author" content="HOMOLO">
</head>
<link rel="stylesheet" href="css/index.css">
<body class="bd-password">
  <div class="bg-shadow"></div>
  <div class="logo-box"></div>
  <div class="input-box">
    <div class="false-hints">请输入办理公证获取的查询密码</div>
    <div class="flex-box-input">
      <div class="child-wrap" data-index="0">
        <input type="number" class="child-input" maxlength="1">
      </div>
      <div class="child-wrap" data-index="1">
        <input type="number" class="child-input" maxlength="1">
      </div>
      <div class="child-wrap" data-index="2">
        <input type="number" class="child-input" maxlength="1">
      </div>
      <div class="child-wrap" data-index="3">
        <input type="number" class="child-input" maxlength="1">
      </div>
    </div>
  </div>
  <a href="javascript:;" class="password-link">确定</a>
  <script>
    window.onload =function () {
      var passWordNum = 6666;
      var link = document.querySelector('.password-link');
      var ts = document.querySelector('.false-hints');
      var inputParent = document.querySelector('.flex-box-input').querySelectorAll('.child-wrap');
      var len = inputParent.length;
      var password = ''
      var num = 0;
      var index;
      for (var i = 0; i < len; i++) {
        var inputChild = inputParent[i].querySelector('.child-input');
        inputChild.value = '';
        inputChild.addEventListener('keyup', function () {
          var val = this.value;
          var paretn = this.parentNode;
          index = [].indexOf.call(paretn.parentNode.querySelectorAll(paretn.tagName), paretn);
          if (val) {
            this.parentNode.setAttribute('class', 'child-wrap active');
            if (inputParent[index+1]) {
              inputParent[index+1].querySelector('.child-input').focus();
            }
          } else {
            this.parentNode.setAttribute('class', 'child-wrap');
            if (inputParent[index-1]) {
              inputParent[index-1].querySelector('.child-input').focus();
            }
          }
        });
        
      }
      link.addEventListener('click', function () {
        for (var i = 0; i < len; i++) {
          if (password.length < 4) {
            password += inputParent[i].querySelector('.child-input').value;
          }
        }
        num = parseInt(password);
        password = ''
        if (num === passWordNum) {
          window.location.href = 'index.html'
        } else {
          ts.classList.add("active");
          ts.innerHTML = '密码输入有误，请重新输入密码！'
        }
      });
    }
  </script>
</body>
</html>